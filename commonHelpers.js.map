{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderMarkup(arr) {\r\n  return arr\r\n    .map(item => {\r\n      return `\r\n           <li class=\"gallery-item\">\r\n          <a href=\"${item.largeImageURL}\">\r\n          <div class=\"image-container\">\r\n            <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\" height=\"200\"> </div>\r\n            <ul class=\"photo-dsc\">\r\n               <li >\r\n                <p class=\"photo-dsc-title\">Likes</p>\r\n                <p class=\"photo-dsc-text\">${item.likes}</p>\r\n              </li>\r\n               <li >\r\n                <p class=\"photo-dsc-title\">Views</p>\r\n                <p class=\"photo-dsc-text\">${item.views}</p>\r\n              </li>\r\n               <li >\r\n                <p class=\"photo-dsc-title\">Comments</p>\r\n                <p class=\"photo-dsc-text\">${item.comments}</p>\r\n              </li>\r\n               <li >\r\n                <p class=\"photo-dsc-title\">Downloads</p>\r\n                <p class=\"photo-dsc-text\">${item.downloads}</p>\r\n              </li>\r\n            </ul>\r\n          </a>\r\n        </li>\r\n      `;\r\n    })\r\n    .join('');\r\n}\r\n","import Axios from 'axios';\r\n\r\nconst axios = Axios.create({\r\n  baseURL: 'https://pixabay.com/api/',\r\n});\r\n\r\nexport async function fetchImages(q, page, per_page) {\r\n  const res = await axios.get('', {\r\n    params: {\r\n      key: '44962724-2fcdbdaf7fb299db2b6841432',\r\n      q,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      safesearch: 'true',\r\n      page,\r\n      per_page,\r\n    },\r\n  });\r\n  return res.data;\r\n}","import 'izitoast/dist/css/iziToast.min.css';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport { renderMarkup } from './js/render-functions';\r\nimport { fetchImages } from './js/pixabay-api';\r\nimport iziToast from 'izitoast';\r\nimport SimpleLightbox from 'simplelightbox';\r\n\r\nlet page = 1;\r\nlet per_page = 15;\r\nlet userValue = '';\r\nlet totalPages = 1;\r\n\r\nexport const refs = {\r\n  formSearchEl: document.querySelector('.form-search'),\r\n  galleryListEl: document.querySelector('.gallery-list'),\r\n  loader: document.querySelector('.loader'),\r\n  loadMoreBtnEl: document.querySelector('.btn-load-more'),\r\n};\r\n\r\nrefs.formSearchEl.addEventListener('submit', onFormSearch);\r\nrefs.loadMoreBtnEl.addEventListener('click', onLoadMoreBtn);\r\n\r\nasync function onFormSearch(e) {\r\n  e.preventDefault();\r\n\r\n  userValue = refs.formSearchEl.elements.search.value.trim();\r\n\r\n  if (!userValue) return;\r\n\r\n  page = 1;\r\n  refs.galleryListEl.innerHTML = '';\r\n  toggleVisibility(refs.loadMoreBtnEl, false);\r\n\r\n  try {\r\n    toggleLoader(true);\r\n    const data = await fetchImages(userValue, page, per_page);\r\n    if (data.hits.length === 0) {\r\n      showToast('error', 'Sorry, there are no images matching your search query. Please try again!');\r\n    } else {\r\n      totalPages = Math.ceil(data.totalHits / per_page);\r\n      refs.galleryListEl.innerHTML = renderMarkup(data.hits);\r\n      gallery.refresh();\r\n      if (data.totalHits > per_page) toggleVisibility(refs.loadMoreBtnEl, true);\r\n    }\r\n  } catch (error) {\r\n    showToast('error', `Error: ${error.message}`);\r\n  }\r\n\r\n  toggleLoader(false);\r\n  refs.formSearchEl.elements.search.value = '';\r\n}\r\n\r\nasync function onLoadMoreBtn() {\r\n  page += 1;\r\n\r\n  try {\r\n    toggleLoader(true);\r\n    if (page === totalPages) {\r\n      showToast('info', \"We're sorry, but you've reached the end of search results.\");\r\n      toggleVisibility(refs.loadMoreBtnEl, false);\r\n    }\r\n    const data = await fetchImages(userValue, page, per_page);\r\n    const markup = renderMarkup(data.hits);\r\n    refs.galleryListEl.insertAdjacentHTML('beforeend', markup);\r\n    gallery.refresh();\r\n    scrollWindow();\r\n  } catch (error) {\r\n    showToast('error', `Error: ${error.message}`);\r\n  }\r\n  toggleLoader(false);\r\n}\r\n\r\nfunction showToast(type, message) {\r\n  const config = {\r\n    message: message,\r\n    backgroundColor: type === 'error' ? '#ef4040' : '#0099FF',\r\n    messageColor: '#fafafb',\r\n    position: 'topRight',\r\n    progressBarColor: '#fafafb',\r\n  };\r\n\r\n  iziToast[type](config);\r\n}\r\n\r\nfunction toggleLoader(isVisible) {\r\n  refs.loader.classList.toggle('loader-hidden', !isVisible);\r\n}\r\n\r\nfunction toggleVisibility(element, isVisible) {\r\n  element.classList.toggle('hidden', !isVisible);\r\n}\r\n\r\nfunction scrollWindow() {\r\n  const galleryItemEl = document.querySelector('.gallery-item');\r\n  const galleryItemHeight = galleryItemEl.getBoundingClientRect().height;\r\n  window.scrollBy({\r\n    top: galleryItemHeight * 2,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\n\r\nconst gallery = new SimpleLightbox('.gallery-list a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});"],"names":["renderMarkup","arr","item","axios","Axios","fetchImages","q","page","per_page","userValue","totalPages","refs","onFormSearch","onLoadMoreBtn","e","toggleVisibility","toggleLoader","data","showToast","gallery","error","markup","scrollWindow","type","message","config","iziToast","isVisible","element","galleryItemHeight","SimpleLightbox"],"mappings":"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"}